(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{2890:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});let i=(0,r(2373).UU)("https://eqvkvorzzyqtfvsnigru.supabase.co","sb_publishable_C9V3cLFgWxrreFFFvHil3g_xbIsgQX8")},5712:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var i=r(5155),s=r(2115),n=r(2890);let l={name:"",service:"",rating:0,text:""};function a(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[o,c]=(0,s.useState)("all"),[d,m]=(0,s.useState)(6),[h,x]=(0,s.useState)({}),[b,u]=(0,s.useState)(!1),[p,g]=(0,s.useState)(l),[v,f]=(0,s.useState)(!1),k=(0,s.useRef)(null),j=(0,s.useCallback)(()=>0===e.length?{avg:0,total:0}:{avg:parseFloat((e.reduce((e,t)=>e+t.rating,0)/e.length).toFixed(1)),total:e.length},[e])(),N=e=>Array.from({length:5},(t,r)=>(0,i.jsx)("span",{className:r<e?"text-ink":"text-rule-light",children:r<e?"★":"☆"},r)),w=()=>{u(!1),g(l),"undefined"!=typeof document&&(document.body.style.overflow="auto")},y=e=>{let{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},C=e=>{g(t=>({...t,rating:e}))},S=(0,s.useCallback)(async()=>{let{data:e,error:r}=await n.N.from("reviews").select('id, name, service, rating, "text", helpful, created_at').order("created_at",{ascending:!1});if(r)return void console.error("Error fetching reviews:",r.message,r);t((null!=e?e:[]).map(e=>{var t;return{id:e.id,name:e.name,service:e.service,rating:e.rating,date:e.created_at.split("T")[0],text:e.text,helpful:null!=(t=e.helpful)?t:0}}))},[]);(0,s.useEffect)(()=>{S().finally(()=>a(!1))},[S]);let R=async e=>{if(e.preventDefault(),!p.rating)return void alert("Please select a rating");try{var r;let{data:e,error:i}=await n.N.from("reviews").insert({name:p.name.trim(),service:p.service,rating:p.rating,text:p.text.trim()}).select('id, name, service, rating, "text", helpful, created_at').single();if(i)throw i;let s={id:e.id,name:e.name,service:e.service,rating:e.rating,date:e.created_at.split("T")[0],text:e.text,helpful:null!=(r=e.helpful)?r:0};t(e=>[s,...e]),f(!0),w(),g(l),m(6),setTimeout(()=>f(!1),1500)}catch(t){let e=t&&"object"==typeof t&&"message"in t?String(t.message):"";alert(e?"Failed to submit review: ".concat(e):"Failed to submit review. Please try again.")}};(0,s.useEffect)(()=>{{let e=localStorage.getItem("helpfulClicks");if(e)try{x(JSON.parse(e))}catch(e){console.error("Error loading helpful clicks:",e)}}},[]),(0,s.useEffect)(()=>{Object.keys(h).length>0&&localStorage.setItem("helpfulClicks",JSON.stringify(h))},[h]);let _="all"===o?e:e.filter(e=>e.service===o),F=_.slice(0,d),D=_.length>d,E="py-2 px-4 text-sm font-[inherit] border border-rule bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white hover:border-ink";return(0,i.jsxs)("div",{children:[(0,i.jsx)("section",{className:"py-12 px-6 min-h-screen bg-paper",children:(0,i.jsxs)("div",{className:"max-w-content mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8 pb-6 border-b border-rule-light",children:[(0,i.jsx)("span",{className:"text-xs uppercase tracking-widest text-ink-light block mb-2",children:"Testimonials"}),(0,i.jsx)("h2",{className:"text-[clamp(1.5rem,3vw,2rem)] mb-2",children:"What Our Clients Say"}),(0,i.jsx)("p",{className:"text-[0.95rem] text-ink-light",children:"Don't just take our word for it. Here's what homeowners have to say about their remodeling experience with us."})]}),(0,i.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-6 p-6 border border-rule mb-8",children:r?(0,i.jsx)("p",{className:"text-ink-light",children:"Loading reviews..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-2xl",children:N(Math.floor(j.avg))}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-3xl font-bold",children:j.avg}),(0,i.jsxs)("span",{className:"text-sm text-ink-light ml-1",children:["out of 5 based on ",(0,i.jsx)("span",{children:j.total})," reviews"]})]})]})}),(0,i.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[(0,i.jsx)("button",{className:"".concat(E," ").concat("all"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("all"),m(6)},children:"All Reviews"}),(0,i.jsx)("button",{className:"".concat(E," ").concat("basement"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("basement"),m(6)},children:"Basement"}),(0,i.jsx)("button",{className:"".concat(E," ").concat("kitchen"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("kitchen"),m(6)},children:"Kitchen"}),(0,i.jsx)("button",{className:"".concat(E," ").concat("bathroom"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("bathroom"),m(6)},children:"Bathroom"}),(0,i.jsx)("button",{className:"".concat(E," ").concat("living-room"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("living-room"),m(6)},children:"Living Room"})]}),(0,i.jsxs)("div",{className:"grid gap-6 mb-8",children:[r&&(0,i.jsx)("p",{className:"text-ink-light",children:"Loading reviews..."}),!r&&0===F.length&&(0,i.jsx)("p",{className:"text-ink-light text-center py-8",children:"No reviews yet. Be the first to share your experience!"}),F.map((e,t)=>{let r=e.name.split(" ").map(e=>e[0]).join(""),s=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n=h[e.id];return(0,i.jsxs)("div",{className:"p-6 border border-rule-light border-l-4 border-l-ink",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-rule-light",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 flex items-center justify-center bg-ink text-paper text-xs font-bold shrink-0",children:r}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-base mb-1",children:e.name}),(0,i.jsx)("span",{className:"text-sm text-ink-light",children:s})]})]}),(0,i.jsx)("div",{className:"text-sm",children:N(e.rating)})]}),(0,i.jsx)("span",{className:"inline-block text-[0.7rem] uppercase tracking-wider text-ink-light mb-3",children:e.service.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")+" Remodeling"}),(0,i.jsx)("p",{className:"text-[0.95rem] leading-relaxed mb-4",children:e.text}),(0,i.jsx)("div",{className:"pt-4 border-t border-rule-light",children:(0,i.jsxs)("button",{type:"button",className:"text-sm font-[inherit] border border-rule py-1.5 px-3 cursor-pointer text-ink hover:bg-ink hover:text-white ".concat(n?"!bg-ink !text-white border-ink":""),onClick:()=>{var t;return t=e.id,void x(e=>{if(e[t]){let r={...e};return delete r[t],r}return{...e,[t]:!0}})},children:["\uD83D\uDC4D Helpful (",e.helpful+ +!!n,")"]})})]},e.id)})]}),D&&(0,i.jsx)("div",{className:"text-center mt-8",children:(0,i.jsx)("button",{type:"button",className:"py-2 px-6 text-sm font-[inherit] border border-ink bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white",onClick:()=>m(d+6),children:"Load More Reviews"})})]})}),(0,i.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[1000] flex justify-center items-center p-6 ".concat(b?"flex":"hidden"),ref:k,children:(0,i.jsxs)("div",{className:"bg-paper p-8 max-w-[560px] w-full max-h-[90vh] overflow-y-auto border border-rule relative",children:[(0,i.jsx)("button",{type:"button",className:"absolute top-4 right-4 bg-transparent border border-rule p-1.5 cursor-pointer text-xl text-ink hover:bg-ink hover:text-white",onClick:w,children:"\xd7"}),(0,i.jsx)("h2",{className:"text-2xl mb-6 pb-3 border-b border-rule",children:"Write a Review"}),v&&(0,i.jsx)("div",{className:"bg-ink text-paper p-4 mb-4 text-center text-[0.95rem]",children:"✓ Thank you! Your review has been submitted successfully."}),(0,i.jsxs)("form",{onSubmit:R,children:[(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewerName",className:"block text-sm mb-1.5",children:"Your Name *"}),(0,i.jsx)("input",{type:"text",id:"reviewerName",name:"name",value:p.name,onChange:y,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink"})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewService",className:"block text-sm mb-1.5",children:"Service Type *"}),(0,i.jsxs)("select",{id:"reviewService",name:"service",value:p.service,onChange:y,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink",children:[(0,i.jsx)("option",{value:"",children:"Select a service"}),(0,i.jsx)("option",{value:"basement",children:"Basement Remodeling"}),(0,i.jsx)("option",{value:"kitchen",children:"Kitchen Remodeling"}),(0,i.jsx)("option",{value:"bathroom",children:"Bathroom Remodeling"}),(0,i.jsx)("option",{value:"living-room",children:"Living Room Remodeling"}),(0,i.jsx)("option",{value:"other",children:"Other"})]})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{className:"block text-sm mb-1.5",children:"Your Rating *"}),(0,i.jsx)("div",{className:"flex gap-2 text-xl mt-1",children:[1,2,3,4,5].map(e=>(0,i.jsx)("span",{role:"button",tabIndex:0,className:"cursor-pointer ".concat(p.rating>=e?"text-ink":"text-rule-light"," hover:text-ink"),onClick:()=>C(e),onKeyDown:t=>"Enter"===t.key&&C(e),children:"★"},e))})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewText",className:"block text-sm mb-1.5",children:"Your Review *"}),(0,i.jsx)("textarea",{id:"reviewText",name:"text",value:p.text,onChange:y,rows:5,required:!0,placeholder:"Tell us about your experience...",className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper min-h-[100px] resize-y focus:outline-none focus:border-ink"})]}),(0,i.jsx)("button",{type:"submit",className:"w-full py-3 bg-ink text-paper border border-ink font-[inherit] text-sm cursor-pointer hover:bg-ink-light hover:border-ink-light",children:"Submit Review"})]})]})}),(0,i.jsxs)("button",{type:"button",className:"fixed bottom-6 right-6 bg-ink text-paper border border-ink py-3 px-5 cursor-pointer font-[inherit] text-sm z-[100] hover:bg-ink-light hover:border-ink-light sm:inline-flex sm:items-center sm:gap-2",onClick:()=>{u(!0),"undefined"!=typeof document&&(document.body.style.overflow="hidden")},children:[(0,i.jsx)("span",{children:"✍️"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Write a Review"})]})]})}},7697:(e,t,r)=>{Promise.resolve().then(r.bind(r,5712))}},e=>{e.O(0,[373,441,255,358],()=>e(e.s=7697)),_N_E=e.O()}]);