!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2edb0986-f19a-46af-b150-12f449fb7e7c",e._sentryDebugIdIdentifier="sentry-dbid-2edb0986-f19a-46af-b150-12f449fb7e7c")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{13389:(e,t,r)=>{"use strict";r.d(t,{vj:()=>o,MB:()=>n,LM:()=>s,h6:()=>a});var i=r(62890);async function s(e){let{error:t}=await i.N.from("contact_submissions").insert({name:e.name.trim().slice(0,200),email:e.email.trim().slice(0,255),phone:e.phone.trim().slice(0,50),preferred_contact:e.preferred_contact,service:e.service,project_type:e.project_type||null,budget:e.budget||null,timeline:e.timeline||null,message:e.message.trim().slice(0,1e4)});return{error:null!=t?t:null}}let l='id, name, service, rating, "text", helpful, created_at';async function n(){let{data:e,error:t}=await i.N.from("reviews").select(l).order("created_at",{ascending:!1});return t?[]:(null!=e?e:[]).map(e=>{var t;return{id:e.id,name:e.name,service:e.service,rating:e.rating,date:e.created_at.split("T")[0],text:e.text,helpful:null!=(t=e.helpful)?t:0}})}async function a(e){var t;let{data:r,error:s}=await i.N.from("reviews").insert({name:e.name.trim().slice(0,200),service:e.service,rating:e.rating,text:e.text.trim().slice(0,5e3)}).select(l).single();return s?{data:null,error:s}:{data:r?{id:r.id,name:r.name,service:r.service,rating:r.rating,date:r.created_at.split("T")[0],text:r.text,helpful:null!=(t=r.helpful)?t:0}:null,error:null}}async function o(){let{data:e}=await i.N.from("projects").select("id, title, category, description, sort_order").order("sort_order",{ascending:!0});if(!(null==e?void 0:e.length))return[];let{data:t}=await i.N.from("project_images").select("project_id, url, label, sort_order").order("sort_order",{ascending:!0}),r=null!=t?t:[];return e.map(e=>{var t;let i=r.filter(t=>t.project_id===e.id&&"before"===t.label).sort((e,t)=>e.sort_order-t.sort_order).map(e=>e.url),s=r.filter(t=>t.project_id===e.id&&"after"===t.label).sort((e,t)=>e.sort_order-t.sort_order).map(e=>e.url);return{id:e.id,category:e.category,title:e.title,description:null!=(t=e.description)?t:"",before:i,after:s}})}},47697:(e,t,r)=>{Promise.resolve().then(r.bind(r,53626))},53626:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var i=r(95155),s=r(12115),l=r(13389);function n(){return(0,i.jsx)("div",{className:"grid gap-6",children:[1,2,3,4].map(e=>(0,i.jsxs)("div",{className:"p-4 sm:p-6 border border-rule-light border-l-4 border-l-rule-light animate-pulse","aria-hidden":!0,children:[(0,i.jsxs)("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-rule-light",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded bg-rule-light/30 shrink-0"}),(0,i.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,i.jsx)("div",{className:"h-4 bg-rule-light/30 rounded w-1/3"}),(0,i.jsx)("div",{className:"h-3 bg-rule-light/20 rounded w-1/4"})]})]}),(0,i.jsx)("div",{className:"h-3 bg-rule-light/20 rounded w-1/6 mb-3"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"h-4 bg-rule-light/20 rounded w-full"}),(0,i.jsx)("div",{className:"h-4 bg-rule-light/20 rounded w-5/6"}),(0,i.jsx)("div",{className:"h-4 bg-rule-light/20 rounded w-4/6"})]})]},e))})}let a={name:"",service:"",rating:0,text:""};function o(){let{reviews:e,loading:t,refetch:r}=function(){let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[n,a]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{i(!0),a(null);try{let e=await (0,l.MB)();t(e)}catch(e){a(e instanceof Error?e:Error("Failed to load reviews")),t([])}finally{i(!1)}},[]);return(0,s.useEffect)(()=>{o()},[o]),{reviews:e,loading:r,error:n,refetch:o}}(),[o,c]=(0,s.useState)("all"),[d,m]=(0,s.useState)(6),[u,h]=(0,s.useState)({}),[x,b]=(0,s.useState)(!1),[p,g]=(0,s.useState)(a),[v,f]=(0,s.useState)(!1),[j,k]=(0,s.useState)(null),N=(0,s.useCallback)(()=>0===e.length?{avg:0,total:0}:{avg:parseFloat((e.reduce((e,t)=>e+t.rating,0)/e.length).toFixed(1)),total:e.length},[e])(),w=e=>Array.from({length:5},(t,r)=>(0,i.jsx)("span",{className:r<e?"text-ink":"text-rule-light",children:r<e?"★":"☆"},r)),y=()=>{b(!1),g(a),k(null),"undefined"!=typeof document&&(document.body.style.overflow="auto")},_=e=>{let{name:t,value:r}=e.target;g(e=>({...e,[t]:r})),j&&k(null)},S=e=>{g(t=>({...t,rating:e})),j&&k(null)};(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y()};return x&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[x]);let C=async e=>{if(e.preventDefault(),k(null),!p.rating)return void k("Please select a rating.");if(p.text.trim().length>5e3)return void k("Review text is too long (max 5,000 characters).");try{let{data:e,error:t}=await (0,l.h6)({name:p.name.trim(),service:p.service,rating:p.rating,text:p.text.trim()});if(t)throw t;f(!0),k(null),y(),g(a),m(6),e&&r(),setTimeout(()=>f(!1),1500)}catch(e){k("Failed to submit review. Please try again.")}};(0,s.useEffect)(()=>{{let e=localStorage.getItem("helpfulClicks");if(e)try{h(JSON.parse(e))}catch(e){}}},[]),(0,s.useEffect)(()=>{Object.keys(u).length>0&&localStorage.setItem("helpfulClicks",JSON.stringify(u))},[u]);let E="all"===o?e:e.filter(e=>e.service===o),R=E.slice(0,d),D=E.length>d,F="py-1.5 px-3 sm:py-2 sm:px-4 text-xs sm:text-sm font-[inherit] border border-rule bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white hover:border-ink";return(0,i.jsxs)("div",{children:[(0,i.jsx)("section",{className:"py-12 px-6 min-h-screen bg-paper",children:(0,i.jsxs)("div",{className:"max-w-content mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8 pb-6 border-b border-rule-light",children:[(0,i.jsx)("span",{className:"text-xs uppercase tracking-widest text-ink-light block mb-2",children:"Testimonials"}),(0,i.jsx)("h2",{className:"text-[clamp(1.5rem,3vw,2rem)] mb-2",children:"What Our Clients Say"}),(0,i.jsx)("p",{className:"text-[0.95rem] text-ink-light",children:"Don't just take our word for it. Here's what homeowners have to say about their remodeling experience with us."})]}),(0,i.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-3 sm:gap-6 p-4 sm:p-6 border border-rule mb-6 sm:mb-8",children:t?(0,i.jsx)("div",{className:"h-12 w-48 bg-rule-light/20 rounded animate-pulse","aria-hidden":!0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-2xl",children:w(Math.floor(N.avg))}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-3xl font-bold",children:N.avg}),(0,i.jsxs)("span",{className:"text-sm text-ink-light ml-1",children:["out of 5 based on ",(0,i.jsx)("span",{children:N.total})," reviews"]})]})]})}),(0,i.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[(0,i.jsx)("button",{className:"".concat(F," ").concat("all"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("all"),m(6)},children:"All Reviews"}),(0,i.jsx)("button",{className:"".concat(F," ").concat("basement"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("basement"),m(6)},children:"Basement"}),(0,i.jsx)("button",{className:"".concat(F," ").concat("kitchen"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("kitchen"),m(6)},children:"Kitchen"}),(0,i.jsx)("button",{className:"".concat(F," ").concat("bathroom"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("bathroom"),m(6)},children:"Bathroom"}),(0,i.jsx)("button",{className:"".concat(F," ").concat("living-room"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("living-room"),m(6)},children:"Living Room"})]}),(0,i.jsxs)("div",{className:"grid gap-6 mb-8",children:[t&&(0,i.jsx)(n,{}),!t&&0===R.length&&(0,i.jsx)("p",{className:"text-ink-light text-center py-8",children:"No reviews yet. Be the first to share your experience!"}),!t&&R.map((e,t)=>{let r=e.name.split(" ").map(e=>e[0]).join(""),s=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),l=u[e.id];return(0,i.jsxs)("div",{className:"p-4 sm:p-6 border border-rule-light border-l-4 border-l-ink",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 sm:mb-4 pb-3 sm:pb-4 border-b border-rule-light gap-2",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-ink text-paper text-[10px] sm:text-xs font-bold shrink-0",children:r}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm sm:text-base mb-0.5 sm:mb-1",children:e.name}),(0,i.jsx)("span",{className:"text-xs sm:text-sm text-ink-light",children:s})]})]}),(0,i.jsx)("div",{className:"text-xs sm:text-sm pl-11 sm:pl-0",children:w(e.rating)})]}),(0,i.jsx)("span",{className:"inline-block text-[0.7rem] uppercase tracking-wider text-ink-light mb-3",children:e.service.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")+" Remodeling"}),(0,i.jsx)("p",{className:"text-sm sm:text-[0.95rem] leading-relaxed mb-3 sm:mb-4",children:e.text}),(0,i.jsx)("div",{className:"pt-4 border-t border-rule-light",children:(0,i.jsxs)("button",{type:"button",className:"text-sm font-[inherit] border border-rule py-1.5 px-3 cursor-pointer text-ink hover:bg-ink hover:text-white ".concat(l?"!bg-ink !text-white border-ink":""),onClick:()=>{var t;return t=e.id,void h(e=>{if(e[t]){let r={...e};return delete r[t],r}return{...e,[t]:!0}})},children:["\uD83D\uDC4D Helpful (",e.helpful+ +!!l,")"]})})]},e.id)})]}),!t&&D&&(0,i.jsx)("div",{className:"text-center mt-8",children:(0,i.jsx)("button",{type:"button",className:"py-2 px-6 text-sm font-[inherit] border border-ink bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white",onClick:()=>m(d+6),children:"Load More Reviews"})})]})}),(0,i.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[1000] flex justify-center items-center p-3 sm:p-6 ".concat(x?"flex":"hidden"),onClick:y,role:"dialog","aria-modal":"true","aria-label":"Write a review",children:(0,i.jsxs)("div",{className:"bg-paper p-4 sm:p-8 max-w-[560px] w-full max-h-[90vh] overflow-y-auto border border-rule relative",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{type:"button",className:"absolute top-4 right-4 bg-transparent border border-rule p-1.5 cursor-pointer text-xl text-ink hover:bg-ink hover:text-white rounded",onClick:y,"aria-label":"Close (Escape)",children:"\xd7"}),(0,i.jsx)("h2",{className:"text-2xl mb-6 pb-3 border-b border-rule",children:"Write a Review"}),j&&(0,i.jsx)("div",{className:"bg-ink/10 border border-ink text-ink p-4 mb-4 text-center text-[0.95rem]",role:"alert",children:j}),v&&(0,i.jsx)("div",{className:"bg-ink text-paper p-4 mb-4 text-center text-[0.95rem]",children:"✓ Thank you! Your review has been submitted successfully."}),(0,i.jsxs)("form",{onSubmit:C,children:[(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewerName",className:"block text-sm mb-1.5",children:"Your Name *"}),(0,i.jsx)("input",{type:"text",id:"reviewerName",name:"name",value:p.name,onChange:_,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink"})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewService",className:"block text-sm mb-1.5",children:"Service Type *"}),(0,i.jsxs)("select",{id:"reviewService",name:"service",value:p.service,onChange:_,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink",children:[(0,i.jsx)("option",{value:"",children:"Select a service"}),(0,i.jsx)("option",{value:"basement",children:"Basement Remodeling"}),(0,i.jsx)("option",{value:"kitchen",children:"Kitchen Remodeling"}),(0,i.jsx)("option",{value:"bathroom",children:"Bathroom Remodeling"}),(0,i.jsx)("option",{value:"living-room",children:"Living Room Remodeling"}),(0,i.jsx)("option",{value:"other",children:"Other"})]})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{className:"block text-sm mb-1.5",children:"Your Rating *"}),(0,i.jsx)("div",{className:"flex gap-2 text-xl mt-1",children:[1,2,3,4,5].map(e=>(0,i.jsx)("span",{role:"button",tabIndex:0,className:"cursor-pointer ".concat(p.rating>=e?"text-ink":"text-rule-light"," hover:text-ink"),onClick:()=>S(e),onKeyDown:t=>"Enter"===t.key&&S(e),children:"★"},e))})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"reviewText",className:"block text-sm mb-1.5",children:"Your Review *"}),(0,i.jsx)("textarea",{id:"reviewText",name:"text",value:p.text,onChange:_,rows:5,required:!0,placeholder:"Tell us about your experience...",className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper min-h-[100px] resize-y focus:outline-none focus:border-ink"})]}),(0,i.jsx)("button",{type:"submit",className:"w-full py-3 bg-ink text-paper border border-ink font-[inherit] text-sm cursor-pointer hover:bg-ink-light hover:border-ink-light",children:"Submit Review"})]})]})}),(0,i.jsxs)("button",{type:"button",className:"fixed bottom-6 right-6 bg-ink text-paper border border-ink py-3 px-5 cursor-pointer font-[inherit] text-sm z-[100] hover:bg-ink-light hover:border-ink-light sm:inline-flex sm:items-center sm:gap-2",onClick:()=>{b(!0),"undefined"!=typeof document&&(document.body.style.overflow="hidden")},children:[(0,i.jsx)("span",{children:"✍️"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Write a Review"})]})]})}},62890:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var i=r(92373);let s="https://eqvkvorzzyqtfvsnigru.supabase.co",l="sb_publishable_C9V3cLFgWxrreFFFvHil3g_xbIsgQX8";if(!s||!l)throw Error("Missing Supabase env vars. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For GitHub Actions: add them in Settings → Secrets and variables → Actions.");let n=(0,i.UU)(s,l)}},e=>{e.O(0,[373,441,391,358],()=>e(e.s=47697)),_N_E=e.O()}]);