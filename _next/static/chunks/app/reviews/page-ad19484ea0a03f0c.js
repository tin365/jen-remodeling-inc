(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{2890:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(2373);let i="https://eqvkvorzzyqtfvsnigru.supabase.co",n="sb_publishable_C9V3cLFgWxrreFFFvHil3g_xbIsgQX8";if(!i||!n)throw Error("Missing Supabase env vars. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For GitHub Actions: add them in Settings → Secrets and variables → Actions.");let l=(0,s.UU)(i,n)},5712:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(5155),i=r(2115),n=r(2890);let l={name:"",service:"",rating:0,text:""};function a(){let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[o,c]=(0,i.useState)("all"),[d,m]=(0,i.useState)(6),[x,h]=(0,i.useState)({}),[b,u]=(0,i.useState)(!1),[p,v]=(0,i.useState)(l),[g,f]=(0,i.useState)(!1),k=(0,i.useCallback)(()=>0===e.length?{avg:0,total:0}:{avg:parseFloat((e.reduce((e,t)=>e+t.rating,0)/e.length).toFixed(1)),total:e.length},[e])(),j=e=>Array.from({length:5},(t,r)=>(0,s.jsx)("span",{className:r<e?"text-ink":"text-rule-light",children:r<e?"★":"☆"},r)),N=()=>{u(!1),v(l),"undefined"!=typeof document&&(document.body.style.overflow="auto")},w=e=>{let{name:t,value:r}=e.target;v(e=>({...e,[t]:r}))},y=e=>{v(t=>({...t,rating:e}))},S=(0,i.useCallback)(async()=>{let{data:e,error:r}=await n.N.from("reviews").select('id, name, service, rating, "text", helpful, created_at').order("created_at",{ascending:!1});r||t((null!=e?e:[]).map(e=>{var t;return{id:e.id,name:e.name,service:e.service,rating:e.rating,date:e.created_at.split("T")[0],text:e.text,helpful:null!=(t=e.helpful)?t:0}}))},[]);(0,i.useEffect)(()=>{S().finally(()=>a(!1))},[S]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&N()};return b&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[b]);let C=async e=>{if(e.preventDefault(),!p.rating)return void alert("Please select a rating");try{var r;let{data:e,error:s}=await n.N.from("reviews").insert({name:p.name.trim(),service:p.service,rating:p.rating,text:p.text.trim()}).select('id, name, service, rating, "text", helpful, created_at').single();if(s)throw s;let i={id:e.id,name:e.name,service:e.service,rating:e.rating,date:e.created_at.split("T")[0],text:e.text,helpful:null!=(r=e.helpful)?r:0};t(e=>[i,...e]),f(!0),N(),v(l),m(6),setTimeout(()=>f(!1),1500)}catch(e){alert("Failed to submit review. Please try again.")}};(0,i.useEffect)(()=>{{let e=localStorage.getItem("helpfulClicks");if(e)try{h(JSON.parse(e))}catch(e){}}},[]),(0,i.useEffect)(()=>{Object.keys(x).length>0&&localStorage.setItem("helpfulClicks",JSON.stringify(x))},[x]);let _="all"===o?e:e.filter(e=>e.service===o),E=_.slice(0,d),R=_.length>d,F="py-1.5 px-3 sm:py-2 sm:px-4 text-xs sm:text-sm font-[inherit] border border-rule bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white hover:border-ink";return(0,s.jsxs)("div",{children:[(0,s.jsx)("section",{className:"py-12 px-6 min-h-screen bg-paper",children:(0,s.jsxs)("div",{className:"max-w-content mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8 pb-6 border-b border-rule-light",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-widest text-ink-light block mb-2",children:"Testimonials"}),(0,s.jsx)("h2",{className:"text-[clamp(1.5rem,3vw,2rem)] mb-2",children:"What Our Clients Say"}),(0,s.jsx)("p",{className:"text-[0.95rem] text-ink-light",children:"Don't just take our word for it. Here's what homeowners have to say about their remodeling experience with us."})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-3 sm:gap-6 p-4 sm:p-6 border border-rule mb-6 sm:mb-8",children:r?(0,s.jsx)("p",{className:"text-ink-light",children:"Loading reviews..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl",children:j(Math.floor(k.avg))}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-3xl font-bold",children:k.avg}),(0,s.jsxs)("span",{className:"text-sm text-ink-light ml-1",children:["out of 5 based on ",(0,s.jsx)("span",{children:k.total})," reviews"]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[(0,s.jsx)("button",{className:"".concat(F," ").concat("all"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("all"),m(6)},children:"All Reviews"}),(0,s.jsx)("button",{className:"".concat(F," ").concat("basement"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("basement"),m(6)},children:"Basement"}),(0,s.jsx)("button",{className:"".concat(F," ").concat("kitchen"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("kitchen"),m(6)},children:"Kitchen"}),(0,s.jsx)("button",{className:"".concat(F," ").concat("bathroom"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("bathroom"),m(6)},children:"Bathroom"}),(0,s.jsx)("button",{className:"".concat(F," ").concat("living-room"===o?"!bg-ink !text-white border-ink":""),onClick:()=>{c("living-room"),m(6)},children:"Living Room"})]}),(0,s.jsxs)("div",{className:"grid gap-6 mb-8",children:[r&&(0,s.jsx)("p",{className:"text-ink-light",children:"Loading reviews..."}),!r&&0===E.length&&(0,s.jsx)("p",{className:"text-ink-light text-center py-8",children:"No reviews yet. Be the first to share your experience!"}),E.map((e,t)=>{let r=e.name.split(" ").map(e=>e[0]).join(""),i=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n=x[e.id];return(0,s.jsxs)("div",{className:"p-4 sm:p-6 border border-rule-light border-l-4 border-l-ink",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 sm:mb-4 pb-3 sm:pb-4 border-b border-rule-light gap-2",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-ink text-paper text-[10px] sm:text-xs font-bold shrink-0",children:r}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm sm:text-base mb-0.5 sm:mb-1",children:e.name}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-ink-light",children:i})]})]}),(0,s.jsx)("div",{className:"text-xs sm:text-sm pl-11 sm:pl-0",children:j(e.rating)})]}),(0,s.jsx)("span",{className:"inline-block text-[0.7rem] uppercase tracking-wider text-ink-light mb-3",children:e.service.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")+" Remodeling"}),(0,s.jsx)("p",{className:"text-sm sm:text-[0.95rem] leading-relaxed mb-3 sm:mb-4",children:e.text}),(0,s.jsx)("div",{className:"pt-4 border-t border-rule-light",children:(0,s.jsxs)("button",{type:"button",className:"text-sm font-[inherit] border border-rule py-1.5 px-3 cursor-pointer text-ink hover:bg-ink hover:text-white ".concat(n?"!bg-ink !text-white border-ink":""),onClick:()=>{var t;return t=e.id,void h(e=>{if(e[t]){let r={...e};return delete r[t],r}return{...e,[t]:!0}})},children:["\uD83D\uDC4D Helpful (",e.helpful+ +!!n,")"]})})]},e.id)})]}),R&&(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)("button",{type:"button",className:"py-2 px-6 text-sm font-[inherit] border border-ink bg-transparent text-ink cursor-pointer hover:bg-ink hover:text-white",onClick:()=>m(d+6),children:"Load More Reviews"})})]})}),(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[1000] flex justify-center items-center p-3 sm:p-6 ".concat(b?"flex":"hidden"),onClick:N,role:"dialog","aria-modal":"true","aria-label":"Write a review",children:(0,s.jsxs)("div",{className:"bg-paper p-4 sm:p-8 max-w-[560px] w-full max-h-[90vh] overflow-y-auto border border-rule relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{type:"button",className:"absolute top-4 right-4 bg-transparent border border-rule p-1.5 cursor-pointer text-xl text-ink hover:bg-ink hover:text-white rounded",onClick:N,"aria-label":"Close (Escape)",children:"\xd7"}),(0,s.jsx)("h2",{className:"text-2xl mb-6 pb-3 border-b border-rule",children:"Write a Review"}),g&&(0,s.jsx)("div",{className:"bg-ink text-paper p-4 mb-4 text-center text-[0.95rem]",children:"✓ Thank you! Your review has been submitted successfully."}),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{htmlFor:"reviewerName",className:"block text-sm mb-1.5",children:"Your Name *"}),(0,s.jsx)("input",{type:"text",id:"reviewerName",name:"name",value:p.name,onChange:w,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink"})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{htmlFor:"reviewService",className:"block text-sm mb-1.5",children:"Service Type *"}),(0,s.jsxs)("select",{id:"reviewService",name:"service",value:p.service,onChange:w,required:!0,className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper focus:outline-none focus:border-ink",children:[(0,s.jsx)("option",{value:"",children:"Select a service"}),(0,s.jsx)("option",{value:"basement",children:"Basement Remodeling"}),(0,s.jsx)("option",{value:"kitchen",children:"Kitchen Remodeling"}),(0,s.jsx)("option",{value:"bathroom",children:"Bathroom Remodeling"}),(0,s.jsx)("option",{value:"living-room",children:"Living Room Remodeling"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{className:"block text-sm mb-1.5",children:"Your Rating *"}),(0,s.jsx)("div",{className:"flex gap-2 text-xl mt-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("span",{role:"button",tabIndex:0,className:"cursor-pointer ".concat(p.rating>=e?"text-ink":"text-rule-light"," hover:text-ink"),onClick:()=>y(e),onKeyDown:t=>"Enter"===t.key&&y(e),children:"★"},e))})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{htmlFor:"reviewText",className:"block text-sm mb-1.5",children:"Your Review *"}),(0,s.jsx)("textarea",{id:"reviewText",name:"text",value:p.text,onChange:w,rows:5,required:!0,placeholder:"Tell us about your experience...",className:"w-full p-2 border border-rule font-[inherit] text-[0.95rem] bg-paper min-h-[100px] resize-y focus:outline-none focus:border-ink"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full py-3 bg-ink text-paper border border-ink font-[inherit] text-sm cursor-pointer hover:bg-ink-light hover:border-ink-light",children:"Submit Review"})]})]})}),(0,s.jsxs)("button",{type:"button",className:"fixed bottom-6 right-6 bg-ink text-paper border border-ink py-3 px-5 cursor-pointer font-[inherit] text-sm z-[100] hover:bg-ink-light hover:border-ink-light sm:inline-flex sm:items-center sm:gap-2",onClick:()=>{u(!0),"undefined"!=typeof document&&(document.body.style.overflow="hidden")},children:[(0,s.jsx)("span",{children:"✍️"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Write a Review"})]})]})}},7697:(e,t,r)=>{Promise.resolve().then(r.bind(r,5712))}},e=>{e.O(0,[373,441,255,358],()=>e(e.s=7697)),_N_E=e.O()}]);